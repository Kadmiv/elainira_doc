# Диалог "Установка ежедневной цели"

## 1. Назначение экрана
Диалоговое окно для настройки ежедневной цели ношения элайнеров с возможностью установки минимального и максимального времени ношения в сутки. Позволяет пользователю персонализировать целевые показатели в соответствии с рекомендациями врача или личными предпочтениями.

## 2. Основные компоненты экрана

### Заголовок диалога
- **Заголовок**: "Установка ежедневной цели" в верхней части диалога
- **Кнопка закрытия**: Кнопка для закрытия диалога без сохранения изменений
- **Кнопка подтверждения**: Кнопка для сохранения установленных значений

### Информационный блок
- **Описание рекомендаций**: Текст с информацией о рекомендуемом времени ношения элайнеров
- **Пояснительный текст**: Информация о возможности настройки диапазона под личные предпочтения

### Основной функциональный блок
- **Circular slider**: Круговой слайдер для настройки диапазонов времени ношения
  - **Базовая окружность**: Статичная окружность, отображающая полный диапазон возможных значений
  - **Динамическая дуга**: Подвижная дуга, показывающая выбранный диапазон времени
  - **Два перетаскиваемых маркера**: 
    - **Маркер "More than"**: Перетаскиваемый элемент для установки минимального значения высокого показателя
    - **Маркер "Fewer than"**: Перетаскиваемый элемент для установки максимального значения низкого показателя
  - **Центральная область**: Область внутри слайдера для отображения текущих значений диапазонов
    - Текст "более X часов" для высокого показателя
    - Текст "от X до Y часов" для среднего диапазона
    - Текст "менее X часов" для низкого показателя

### Кнопки управления
- **Кнопка "Отмена"**: В левой части нижней области диалога
- **Кнопка "Сохранить"**: В правой части нижней области диалога

## 3. Пользовательские сценарии

### Основной сценарий настройки цели
1. Пользователь открывает диалог из настроек календаря
2. Пользователь видит circular slider с текущими значениями диапазонов времени ношения
3. Пользователь касается и перетаскивает маркер "More than" для установки минимального значения высокого показателя
4. Пользователь касается и перетаскивает маркер "Fewer than" для установки максимального значения низкого показателя
5. Пользователь видит обновление динамической дуги и текстовых значений в реальном времени
6. Пользователь видит автоматическое обновление среднего диапазона при изменении границ
7. Пользователь нажимает кнопку "Сохранить"
8. Система сохраняет настройки и закрывает диалог

### Сценарий отмены изменений
1. Пользователь вносит изменения в настройки диапазонов
2. Пользователь нажимает кнопку "Отмена"
3. Система закрывает диалог без сохранения изменений
4. Пользователь возвращается к предыдущему экрану

## 4. Состояния экрана

### Состояние настройки
- Отображение circular slider с текущими значениями диапазонов
- Активные перетаскиваемые маркеры для изменения значений
- Автоматическое обновление среднего диапазона при изменении границ

### Состояние изменения значений
- Визуальная обратная связь при перетаскивании маркеров
- Обновление динамической дуги и текстовых значений в реальном времени
- Активация кнопки "Сохранить" при наличии изменений
- Подсветка активного маркера при касании

### Состояние валидации
- Предупреждения при попытке установить некорректные значения
- Блокировка сохранения при нарушении логики диапазонов
- Подсветка проблемных значений

### Состояние сохранения
- Индикатор загрузки при сохранении настроек
- Блокировка интерфейса до завершения операции
- Подтверждение успешного сохранения

## 5. Дополнительные компоненты

### Логика валидации
- Минимальное значение не может превышать максимальное
- Рекомендуемый диапазон: 18-24 часа в сутки
- Предупреждение при выходе за медицинские рекомендации

### Автоматические расчеты
- Средний диапазон рассчитывается автоматически на основе границ
- Обновление происходит в реальном времени при перетаскивании маркеров
- Сохранение логической последовательности диапазонов

## 6. Техническая реализация

### Основа для разработки
Для реализации circular slider рекомендуется использовать подход, описанный в статье [How to build a circular slider in Flutter](https://dev.to/davidanaya/how-to-build-a-circular-slider-in-flutter-1ecc)