# Страница корректировки текущего лечения

## 1. Назначение экрана
Позволяет пользователю изменить параметры текущего активного лечения: количество дней ношения для каждого элайнера и настройки плана лечения.

## 2. Основные компоненты экрана

### Заголовок страницы
- **Кнопка закрытия**: Кнопка для возврата к предыдущему экрану
- **Заголовок**: Название страницы "Adjust Treatment"
- **Кнопка подтверждения**: Кнопка для сохранения всех изменений

### План лечения
- **Список этапов**: Отображение всех этапов лечения с датами
- **Карточки элайнеров**: Информация о каждом элайнере с возможностью редактирования
- **Визуальные связи**: Элементы, показывающие связь между этапами
- **Step Progress компонент**: Для реализации можно использовать готовые пакеты:
  - [step_progress](https://pub.dev/packages/step_progress) - поддерживает вертикальную и горизонтальную ориентацию, кастомизацию узлов и линий
  - [flutter_steps](https://pub.dev/packages/flutter_steps/versions/1.0.4) - альтернативный пакет для создания step progress индикаторов

### Карточки элайнеров
- **Активная карточка**: Выделенная карточка текущего элайнера
- **Неактивные карточки**: Карточки остальных элайнеров
- **Информация об элайнере**: Номер и количество дней ношения
- **Кнопка редактирования**: Кнопка для изменения параметров элайнера

### Окно редактирования
- **Заголовок**: Название редактируемого параметра
- **Список опций**: Варианты значений для выбора
- **Текущее значение**: Выбранная опция
- **Дополнительные настройки**: Опции для применения изменений к другим элементам
- **Кнопки действий**: Кнопки отмены и подтверждения

## 3. Пользовательские сценарии

### Основной сценарий редактирования
1. Пользователь открывает страницу корректировки лечения
2. Пользователь просматривает план лечения
3. Пользователь нажимает на кнопку редактирования нужного элайнера
4. Открывается окно редактирования параметров
5. Пользователь выбирает новое значение из списка опций
6. Пользователь при необходимости настраивает дополнительные параметры
7. Пользователь подтверждает изменения
8. Окно редактирования закрывается, изменения отображаются в карточке элайнера
9. Пользователь нажимает кнопку подтверждения для сохранения всех изменений

### Сценарий отмены изменений
1. Пользователь открывает окно редактирования параметров
2. Пользователь вносит изменения в настройки
3. Пользователь нажимает кнопку отмены
4. Окно редактирования закрывается без применения изменений

### Сценарий применения изменений к другим элементам
1. Пользователь редактирует параметры элайнера
2. Пользователь активирует опцию применения к другим элементам
3. Пользователь подтверждает изменения
4. Система автоматически обновляет соответствующие параметры

### Сценарий закрытия без сохранения
1. Пользователь вносит изменения в параметры
2. Пользователь нажимает кнопку закрытия
3. Система возвращает пользователя к предыдущему экрану без сохранения изменений

## 4. Состояния экрана

### Состояние загрузки
- Индикатор загрузки при открытии страницы и загрузке данных о плане лечения

### Состояние отображения плана лечения
- Отображение всех этапов лечения
- Выделение активного элайнера
- Информация о параметрах каждого элайнера
- Доступность кнопок редактирования

### Состояние открытого окна редактирования
- Окно редактирования поверх основного экрана
- Список опций для выбора
- Выбранная опция с текущим значением
- Доступность дополнительных настроек
- Кнопки отмены и подтверждения

### Состояние ошибки
- Уведомления о проблемах с сохранением данных
- Сообщения об ошибках валидации при некорректных значениях

### Состояние успешного сохранения
- Подтверждение успешного применения изменений
- Автоматический возврат к предыдущему экрану
- Обновление плана лечения с новыми значениями

### Состояние редактирования
- Визуальное выделение измененных элементов
- Активные кнопки редактирования
- Доступность кнопки подтверждения в заголовке
